<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>送给老婆的小玩意儿</title>
	<meta name="keywords" content="码农" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
	<meta name="description" content="最爱的老婆"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="renderer"content="webkit"/>
	<style type="text/css">
		html,body{height:100%;overflow:hidden;margin:0;padding:0;}
		body{background:url(../images/bg.jpg) center center no-repeat #0658c6;background-size:cover;}
		#cont{position:relative;height:100%;}
		.lizi{width:10px;height:10px;position:absolute;left:0;top:0;background:url(../images/s.png) center center no-repeat;background-size:cover}
		.lizi.middle{width:20px;height:20px;}
		.lizi.big{width:40px;height:40px;}
	</style>
</head>
<body>
	<div id="cont">
	</div>
	<script type="text/javascript">
		var cont = document.getElementById("cont");
		function asnow(){
			this.a = new Object;
			var speedx = Math.round(Math.random()*2);
			var speedy = Math.round(Math.random()*3);
			var classname_array = ['lizi','lizi middle','lizi big'];
			this.a.class = classname_array[Math.round(Math.random()*2)];
			this.a.speedx = speedx;
			this.a.speedy = speedy + 2;
			this.a.x = Math.round(Math.random()*document.body.clientWidth);
			this.a.y = 0;
			this.a.div = document.createElement("div");
			this.a.div.className=this.a.class;
			this.a.div.setAttribute("speedx",this.a.speedx);
			this.a.div.setAttribute("speedy",this.a.speedy);
			this.a.div.style.left=this.a.x + "px";
			this.a.div.style.top=this.a.y + "px";
		}
		asnow.prototype.boom = function(){
			console.log(this.a.speedx);
		}
		function m(){
			this.build = function(){
				setInterval(function(){
					var lizis = cont.getElementsByTagName("div");
					if(lizis.length > 30){return;}
					for(var i=0;i<3;i++){
						var temp = new asnow();
						cont.appendChild(temp.a.div);
					}
				},1000);
			},
			this.animate = function(){
				var lizis = cont.getElementsByTagName("div");
				setInterval(function(){
					if(0 === lizis.length){return;}
					for(var i=0;i<lizis.length;i++){
						if(parseInt(lizis[i].style.left) >= document.body.clientWidth - 5 || parseInt(lizis[i].style.top) >= document.body.clientHeight - 350){
							cont.removeChild(lizis[i]);
							continue;
						}
						lizis[i].style.left = lizis[i].getAttribute("speedx")*1+parseInt(lizis[i].style.left)+"px";
						lizis[i].style.top = lizis[i].getAttribute("speedy")*1+parseInt(lizis[i].style.top)+"px";
					}
				},50);
			},
			this.init = function(){
				this.build();
				this.animate();
			}
		}
		
		var b = new m();
		b.init();
	</script>
</body>
</html>